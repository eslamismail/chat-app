(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{786:function(t,e,r){},795:function(t,e,r){"use strict";var n=r(786);r.n(n).a},809:function(t,e,r){"use strict";r.r(e);r(116);var n=r(51),o=r(71),c=r.n(o),l=r(223),d={layout:"simple",head:function(){return{title:"User Login"}},data:function(){return{formError:{email:[],password:[]}}},created:function(){l.remove("token")},mounted:function(){},methods:{login:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var form;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return form=document.getElementById("login"),form=new FormData(form),t.formError.email=[],t.formError.password=[],t.$nuxt.$refs.loading.start(),e.next=7,c.a.post("login",form).then(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$message.success("Welcom back!"),t.$nuxt.$refs.loading.finish(),l.set("token",r.data.access_token),Echo.connector.pusher.config.auth.headers.Authorization="Bearer ".concat(r.data.access_token),c.a.defaults.headers.authorization="Bearer ".concat(r.data.access_token),e.next=7,t.getUser();case 7:t.$router.push({path:"/"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){if(t.$nuxt.$refs.loading.finish(),e.response)if(422==e.response.status){var r=e.response.data.errors;t.$message.error(e.response.data.message),t.formError=r}else t.$message.error(e.response.data.message);else t.$message.error("network error")}));case 7:case"end":return e.stop()}}),e)})))()},getUser:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$nuxt.$refs.loading.start(),e.next=3,c.a.get("/user").then((function(e){return t.$nuxt.$refs.loading.finish(),e.data})).catch((function(e){return console.log(e),t.$nuxt.$refs.loading.finish(),null}));case 3:$nuxt.user=e.sent;case 4:case"end":return e.stop()}}),e)})))()}}},f=(r(795),r(86)),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mh-100 container justify-content-center"},[r("div",{staticClass:"justify-content-center row"},[r("div",{staticClass:"card shadow col-xl-4 col-lg-6 col-md-6 col-sm-10 col-12 p-3 mb-5 bg-white rounded"},[t._m(0),t._v(" "),r("div",{staticClass:"card-body"},[r("form",{staticClass:"col-md-12",attrs:{id:"login",autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[r("div",{staticClass:"form-group row"},[r("div",{staticClass:"col-md-12"},[r("input",{staticClass:"form-control",attrs:{type:"text",name:"email",id:"email",placeholder:"please enter your email"}}),t._v(" "),t._l(t.formError.email,(function(e,n){return r("span",{key:n,staticClass:"text-danger"},[t._v(t._s(e))])}))],2)]),t._v(" "),r("div",{staticClass:"form-group row"},[r("div",{staticClass:"col-md-12"},[r("input",{staticClass:"form-control",attrs:{type:"password",name:"password",id:"password",placeholder:"please enter your password "}}),t._v(" "),t._l(t.formError.password,(function(e,n){return r("span",{key:n,staticClass:"text-danger"},[t._v(t._s(e))])}))],2)]),t._v(" "),r("div",{staticClass:"form-group row"},[r("div",{staticClass:"col-md-12"},[r("button",{staticClass:"btn btn-primary"},[t._v("Login")]),t._v(" "),r("nuxt-link",{staticClass:"btn btn-link",attrs:{to:"/register"}},[t._v("Don't have account")])],1)])])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center"},[e("h3",{staticClass:"uppercase"},[this._v("Login")])])}],!1,null,"bdb3d830",null);e.default=component.exports}}]);
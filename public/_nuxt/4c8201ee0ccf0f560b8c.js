(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{775:function(e,t,n){},776:function(e,t,n){},777:function(e,t,n){},778:function(e,t,n){"use strict";e.exports=n(151)||!n(62)((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete n(54)[e]}))},779:function(e,t,n){"use strict";var r=n(53),o=n(97),c=n(127),l=n(72);n(68)&&r(r.P+n(778),"Object",{__defineGetter__:function(e,t){l.f(o(this),e,{get:c(t),enumerable:!0,configurable:!0})}})},780:function(e,t,n){"use strict";n(46),n(116);var r=n(51),o=(n(783),n(10)),c=n.n(o),l={props:["image"],data:function(){return{visible:!1}},methods:{showModal:function(){this.visible=!0},handleOk:function(e){var t=this;this.ModalText="The modal will be closed after two seconds",this.confirmLoading=!0,setTimeout((function(){t.visible=!1,t.confirmLoading=!1}),2e3)},handleCancel:function(e){this.visible=!1}}},d=(n(784),n(86)),f=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-img",{attrs:{src:e.image,thumbnail:"",center:"",alt:"Responsive image"},on:{click:function(t){return t.preventDefault(),e.showModal()}}}),e._v(" "),n("a-modal",{staticClass:"full-page",attrs:{visible:e.visible,footer:null,header:null},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("b-img",{attrs:{src:e.image,thumbnail:"",center:"",alt:"Responsive image"}})],1)],1)}),[],!1,null,null,null).exports,m={components:{Errors:n(781).a},props:["post"],data:function(){return{visible:!1,errors:{}}},methods:{handleOk:function(){this.visible=!1},solveDate:function(e){return"".concat(c()(e).fromNow())},fullImagePath:function(image){var e=axios.defaults.baseURL.replace("/api","");return image?e+image:null},showModal:function(){this.visible=!0},handleCancel:function(e){this.visible=!1},addComment:function(){var e=this;event.preventDefault();var form=event.target,t=new FormData(form);this.errors=null,axios.post("/posts/".concat(this.post.id,"/comments"),t).then((function(t){e.$message.success(t.data.message),form.reset()})).catch((function(t){console.log(t),t.response?422==t.response.status?(e.errors=t.response.data.errors,e.$message.error(t.response.data.message)):401==t.response.status&&(e.$router.push({path:"/login"}),e.$message.error(t.response.data.message)):e.$message.error("no internet")}))},uploadFile:function(){document.getElementById("image").click()}}},v=(n(785),{name:"PostIndex",props:["post"],components:{PostImage:f,PostComment:Object(d.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("span",{staticClass:"text-muted"},[n("a",{staticClass:"text-muted",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showModal(t)}}},[e._v(e._s(e.post.comments.length)+" Comments")])]),e._v(" "),n("a-modal",{attrs:{footer:null,title:"",visible:e.visible},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("form",{attrs:{autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.addComment(t)}}},[n("div",{staticClass:"row form-group"},[n("div",{staticClass:"col-10 col-md-10 col-lg-10 col-xl-10"},[n("input",{staticClass:"form-control",attrs:{type:"text",name:"comment",placeholder:"leave comment please"}}),e._v(" "),e.errors&&e.errors.comment?n("errors",{attrs:{errors:e.errors.comment}}):e._e(),e._v(" "),e.errors&&e.errors.image?n("errors",{attrs:{errors:e.errors.image}}):e._e()],1),e._v(" "),n("div",{staticClass:"col-2 col-md-2 col-lg-2 col-xl-2"},[n("i",{staticClass:"fas fa-camera scall100",on:{click:function(t){return t.preventDefault(),e.uploadFile()}}}),e._v(" "),n("input",{staticClass:"form-control d-none",attrs:{type:"file",accept:"image/*",name:"image",id:"image"}})])])]),e._v(" "),e._l(e.post.comments,(function(t,r){return n("div",{key:r,staticClass:"row borderd"},[n("div",{staticClass:"col-12"},[t.user?n("h5",{staticClass:"card-text"},[n("nuxt-link",{attrs:{to:"/profile/"+t.user.id}},[n("b-avatar",{attrs:{src:e.fullImagePath(t.user.avatar),variant:"default"}}),e._v("\n            "+e._s(t.user.name)+"\n          ")],1)],1):e._e(),e._v(" "),n("p",[e._v(e._s(t.text))]),e._v(" "),n("small",{staticClass:"text-muted"},[e._v(e._s(e.solveDate(t.created_at)))])]),e._v(" "),t.image?n("div",{staticClass:"col-12"},[n("b-img",{attrs:{src:e.fullImagePath(t.image),thumbnail:"",center:"",alt:"Responsive image"}})],1):e._e()])}))],2)],1)}),[],!1,null,"50b81f94",null).exports},data:function(){return{created_at:null,singlePost:this.post,readMoreActivated:!1,longText:null}},created:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.solveDate();case 1:case"end":return t.stop()}}),t)})))()},methods:{fullImagePath:function(image){var e=axios.defaults.baseURL.replace("/api","");return image?e+image:null},solveDate:function(){var e=this,t=c()().valueOf(),n=c()(this.post.created_at).valueOf(),r=setInterval((function(){t-n<=36e5?e.created_at="".concat(c()(e.singlePost.created_at).fromNow()):t-n<=864e5?e.created_at="Today at  ".concat(c()(e.post.created_at).format("LT")):(e.created_at=c()(e.post.created_at).format("LLLL"),clearInterval(r))}),100)},likePost:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,axios.post("/posts/like/".concat(e)).then((function(e){t.$message.success(e.data.message)})).catch((function(e){e.response?401==e.response.status&&(t.$message.error(e.response.data.message),t.$router.push("/login")):t.$message.error("no internet connection")}));case 2:case"end":return n.stop()}}),n)})))()},likeClass:function(){if(this.singlePost&&this.singlePost.likes){for(var e=0;e<this.singlePost.likes.length;e++)if(this.singlePost.likes[e].user_id==$nuxt.user.id)return"btn-primary";return"btn-outline-primary"}},readMore:function(){this.readMoreActivated=!0,this.longText=this.post.body},readLess:function(){this.readMoreActivated=!1}},watch:{post:function(e){this.singlePost=e}}}),h=Object(d.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[e.singlePost?n("div",{staticClass:"col-md-12"},[n("div",{staticClass:"row shadow-lg m-4 p-4 justify-content-center"},[e.singlePost.image?n("div",{staticClass:"col-11 col-sm-11 col-md-2 col-lg-2 col-xl-2 m-1"},[n("post-image",{attrs:{image:e.fullImagePath(e.singlePost.image)}})],1):e._e(),e._v(" "),n("div",{staticClass:"col-12 col-sm-12 col-md-9 col-lg-9 col-xl-9 m-2"},[e.singlePost.user?n("h5",{staticClass:"card-text"},[n("nuxt-link",{attrs:{to:"/profile/"+e.singlePost.user.id}},[n("b-avatar",{attrs:{src:e.fullImagePath(e.singlePost.user.avatar),variant:"default"}}),e._v("\n            "+e._s(e.singlePost.user.name)+"\n          ")],1)],1):e._e(),e._v(" "),e.readMoreActivated?e._e():n("p",[e._v("\n          "+e._s(e.singlePost.body.slice(0,200))+"\n          "),e.singlePost.body.length>200?n("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.readMore()}}},[e._v("Read More ...")]):e._e()]),e._v(" "),e.readMoreActivated?n("p",[e._v("\n          "+e._s(e.longText)+"\n          "),n("br"),e._v(" "),e.singlePost.body.length>200?n("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.readLess()}}},[e._v("Read Less ...")]):e._e()]):e._e(),e._v(" "),n("p",[n("post-comment",{attrs:{post:e.singlePost}})],1),e._v(" "),n("div",{staticClass:"d-flex justify-content-between"},[n("button",{class:"btn "+e.likeClass(),on:{click:function(t){return t.preventDefault(),e.likePost(e.singlePost.id)}}},[n("i",{staticClass:"far fa-thumbs-up"}),e._v("\n            Like\n            "),e.singlePost&&e.singlePost.likes?n("span",{staticClass:"badge"},[e._v(e._s(e.singlePost.likes.length))]):e._e()]),e._v(" "),n("small",{staticClass:"text-muted"},[e._v(e._s(e.created_at))])])])])]):e._e()])}),[],!1,null,null,null);t.a=h.exports},781:function(e,t,n){"use strict";var r={props:["errors"],created:function(){}},o=(n(782),n(86)),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.errors,(function(t,r){return n("span",{key:r,staticClass:"text-danger form-error"},[e._v(e._s(t))])})),0)}),[],!1,null,"cc750974",null);t.a=component.exports},782:function(e,t,n){"use strict";var r=n(775);n.n(r).a},783:function(e,t,n){n(46),n(56),n(779),n(66),n(67),n(24),window.FontAwesomeKitConfig={asyncLoading:{enabled:!0},autoA11y:{enabled:!0},baseUrl:"https://kit-free.fontawesome.com",detectConflictsUntil:null,license:"free",method:"css",minify:{enabled:!0},v4FontFaceShim:{enabled:!0},v4shim:{enabled:!0},version:"latest"},function(){function e(e){var t,n=[],i=document,r=i.documentElement.doScroll,o="DOMContentLoaded",a=(r?/^loaded|^c/:/^loaded|^i|^c/).test(i.readyState);a||i.addEventListener(o,t=function(){for(i.removeEventListener(o,t),a=1;t=n.shift();)t()}),a?setTimeout(e,0):n.push(e)}function a(e){var t,n,i,r;prefixesArray=e||["fa"],prefixesSelectorString="."+Array.prototype.join.call(e,",."),t=document.querySelectorAll(prefixesSelectorString),Array.prototype.forEach.call(t,(function(e){n=e.getAttribute("title"),e.setAttribute("aria-hidden","true"),i=!e.nextElementSibling||!e.nextElementSibling.classList.contains("sr-only"),n&&i&&((r=document.createElement("span")).innerHTML=n,r.classList.add("sr-only"),e.parentNode.insertBefore(r,e.nextSibling))}))}!function(){if(void 0!==window.Element&&!("classList"in document.documentElement)){var e,t,n,i=Array.prototype,r=i.push,o=i.splice,a=i.join;c.prototype={add:function(e){this.contains(e)||(r.call(this,e),this.el.className=this.toString())},contains:function(e){return-1!=this.el.className.indexOf(e)},item:function(e){return this[e]||null},remove:function(e){if(this.contains(e)){for(var t=0;t<this.length&&this[t]!=e;t++);o.call(this,t,1),this.el.className=this.toString()}},toString:function(){return a.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},window.DOMTokenList=c,e=Element.prototype,t="classList",n=function(){return new c(this)},Object.defineProperty?Object.defineProperty(e,t,{get:n}):e.__defineGetter__(t,n)}function c(e){for(var t=(this.el=e).className.replace(/^\s+|\s+$/g,"").split(/\s+/),n=0;n<t.length;n++)r.call(this,t[n])}}();var t,n,i,r,o,c=function(e,t){var n=document.createElement("link");n.href=e,n.media="all",n.rel="stylesheet",n.id="font-awesome-5-kit-css",t&&t.detectingConflicts&&t.detectionIgnoreAttr&&n.setAttributeNode(document.createAttribute(t.detectionIgnoreAttr)),document.getElementsByTagName("head")[0].appendChild(n)},l=function(e,t){!function(e,t){var n,i=t&&t.before||void 0,r=t&&t.media||void 0,o=window.document,a=o.createElement("link");if(t&&t.detectingConflicts&&t.detectionIgnoreAttr&&a.setAttributeNode(document.createAttribute(t.detectionIgnoreAttr)),i)n=i;else{var c=(o.body||o.getElementsByTagName("head")[0]).childNodes;n=c[c.length-1]}var l=o.styleSheets;a.rel="stylesheet",a.href=e,a.media="only x",function e(t){if(o.body)return t();setTimeout((function(){e(t)}))}((function(){n.parentNode.insertBefore(a,i?n:n.nextSibling)}));function d(){a.addEventListener&&a.removeEventListener("load",d),a.media=r||"all"}a.addEventListener&&a.addEventListener("load",d),(a.onloadcssdefined=function s(e){for(var t=a.href,n=l.length;n--;)if(l[n].href===t)return e();setTimeout((function(){s(e)}))})(d)}(e,t)},d=function(e,t,n){var i=t&&void 0!==t.autoFetchSvg?t.autoFetchSvg:void 0,r=t&&void 0!==t.async?t.async:void 0,o=t&&void 0!==t.autoA11y?t.autoA11y:void 0,a=document.createElement("script"),c=document.scripts[0];a.src=e,void 0!==o&&a.setAttribute("data-auto-a11y",o?"true":"false"),i&&(a.setAttributeNode(document.createAttribute("data-auto-fetch-svg")),a.setAttribute("data-fetch-svg-from",t.fetchSvgFrom)),r&&a.setAttributeNode(document.createAttribute("defer")),n&&n.detectingConflicts&&n.detectionIgnoreAttr&&a.setAttributeNode(document.createAttribute(n.detectionIgnoreAttr)),c.parentNode.appendChild(a)};function s(e,t){var n=t&&t.addOn||"",i=t&&t.baseFilename||e.license+n,r=t&&t.minify?".min":"",o=t&&t.fileSuffix||e.method,a=t&&t.subdir||e.method;return e.baseUrl+"/releases/"+("latest"===e.version?"latest":"v".concat(e.version))+"/"+a+"/"+i+r+"."+o}try{if(window.FontAwesomeKitConfig){var u,f=window.FontAwesomeKitConfig,m={detectingConflicts:f.detectConflictsUntil&&new Date<=new Date(f.detectConflictsUntil),detectionIgnoreAttr:"data-fa-detection-ignore",detectionTimeoutAttr:"data-fa-detection-timeout",detectionTimeout:null};"js"===f.method&&(r=m,o={async:(i=f).asyncLoading.enabled,autoA11y:i.autoA11y.enabled},"pro"===i.license&&(o.autoFetchSvg=!0,o.fetchSvgFrom=i.baseUrl+"/releases/"+("latest"===i.version?"latest":"v".concat(i.version))+"/svgs"),i.v4shim.enabled&&d(s(i,{addOn:"-v4-shims",minify:i.minify.enabled})),d(s(i,{minify:i.minify.enabled}),o,r)),"css"===f.method&&function(t,n){var i=a.bind(a,["fa","fab","fas","far","fal","fad"]);t.autoA11y.enabled&&(e(i),"undefined"!=typeof MutationObserver&&new MutationObserver(i).observe(document,{childList:!0,subtree:!0})),t.v4shim.enabled&&(t.license,t.asyncLoading.enabled?l(s(t,{addOn:"-v4-shims",minify:t.minify.enabled}),n):c(s(t,{addOn:"-v4-shims",minify:t.minify.enabled}),n)),t.v4FontFaceShim.enabled&&(t.asyncLoading.enabled?l(s(t,{addOn:"-v4-font-face",minify:t.minify.enabled}),n):c(s(t,{addOn:"-v4-font-face",minify:t.minify.enabled}),n));var r=s(t,{minify:t.minify.enabled});t.asyncLoading.enabled?l(r,n):c(r,n)}(f,m),m.detectingConflicts&&((u=document.currentScript.getAttribute(m.detectionTimeoutAttr))&&(m.detectionTimeout=u),document.currentScript.setAttributeNode(document.createAttribute(m.detectionIgnoreAttr)),t=f,n=m,e((function(){var e=document.createElement("script");n&&n.detectionIgnoreAttr&&e.setAttributeNode(document.createAttribute(n.detectionIgnoreAttr)),n&&n.detectionTimeoutAttr&&n.detectionTimeout&&e.setAttribute(n.detectionTimeoutAttr,n.detectionTimeout),e.src=s(t,{baseFilename:"conflict-detection",fileSuffix:"js",subdir:"js",minify:t.minify.enabled}),e.async=!0,document.body.appendChild(e)})))}}catch(d){}}()},784:function(e,t,n){"use strict";var r=n(776);n.n(r).a},785:function(e,t,n){"use strict";var r=n(777);n.n(r).a},790:function(e,t,n){},799:function(e,t,n){"use strict";var r=n(790);n.n(r).a},806:function(e,t,n){"use strict";n.r(t);n(46),n(116);var r=n(51),o=(n(49),{middleware:"authenticated",components:{PostIndex:n(780).a},data:function(){return{user:null}},head:function(){return{title:"".concat(this.user?this.user.name:""," Profile")}},created:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getUser(e.$route.params.id);case 2:case"end":return t.stop()}}),t)})))()},beforeRouteLeave:function(e,t,n){var o=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Echo.leave("postsUpdated");case 2:return e.next=4,Echo.leave("post.".concat(o.user.id));case 4:n();case 5:case"end":return e.stop()}}),e)})))()},methods:{getUser:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,axios.get("/user/".concat(e)).then((function(e){t.user=e.data,Echo.private("post.".concat(t.user.id)).listen("PostOwner",(function(e){t.posts.unshift(e.post)})),Echo.join("postsUpdated").listen("LikePost",(function(e){var n=[];t.user.posts.forEach((function(t){t.id==e.post.id?n.push(e.post):n.push(t)})),t.user.posts=n})).listen("CommentAdded",(function(e){var n=[];t.user.posts.forEach((function(t){t.id==e.post.id?n.push(e.post):n.push(t)})),t.user.posts=n}))})).catch((function(e){console.log(e)}));case 2:case"end":return n.stop()}}),n)})))()},fullImagePath:function(image){var e=axios.defaults.baseURL.replace("/api","");return image?e+image:null}}}),c=(n(799),n(86)),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user?n("main",{attrs:{role:"main"}},[n("section",{staticClass:"jumbotron"},[n("div",{staticClass:"container"},[n("div",{staticClass:"row shadow-lg p-5 m-2"},[n("div",{staticClass:"col-md-12"},[n("h1",[n("b-avatar",{attrs:{src:e.fullImagePath(e.user.avatar),variant:"default"}})],1),e._v(" "),n("p",[e._v("Name: "+e._s(e.user.name))]),e._v(" "),n("p",[e._v("Email: "+e._s(e.user.email))]),e._v(" "),n("p",[e._v("Posts: "+e._s(e.user.posts.length))])])])])]),e._v(" "),n("div",{staticClass:"container"},e._l(e.user.posts,(function(e,t){return n("post-index",{key:t,attrs:{post:e}})})),1)]):e._e()}),[],!1,null,"ed3329ac",null);t.default=component.exports}}]);